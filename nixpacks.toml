# Nixpacks configuration for SvelteKit deployment
# Uses updated nixpkgs snapshot for Node.js 22.13+ compatibility

[build]
builder = "nixpacks"

[phases.setup]
nixPkgs = ["nodejs"]

[phases.install]
cmds = ["npm ci"]

[phases.build-dashboard]
dependsOn = ["install"]
cmds = [
  "npm run build",
  "npm prune --production"
]

[start]
cmd = "node build"